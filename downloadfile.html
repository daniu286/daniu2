<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<title>下载文件普通版</title>
		<style>
			body{
				font-size: 60px;
				background-color: azure;
				text-align: center;
				border: 1px solid black;
				height:1680px;
				width:1000px;
			}
			#inp{
				width: 400px;
				height:50px;
				font-size: 45px;
			}
			#slt{
				font-size: 45px;
			}
			textarea{
				width:400px;
				height:400px;
				border: 2px solid purple;
				margin-top: 4px;
				font-size: 42px;
			}
		</style>
	</head>
	<body>
		<br>
		<h1><font color=red>下载文件</font></h1>
		<p style="font-size: 40px;color: gray;">支持IE，Chrome，UC，360，火狐，QQ等多种浏览器</p>
		<hr>
		<table border="1px" style="font-size: 45px;">
			<tr>
				<td>下载路径：<input type="text" value="download文件夹" disabled="disabled" id="inp"></td>
				<td>格式：
				<select id="slt">
					<option name="opt" value="utf-8">txt/utf-8</option>
					<option name="opt" value="ansi">二进制/ANSI</option>
					<option name="opt" disabled="disabled" value="ansi">图像/png</option>
				</select>
				</td>
			</tr>
			<tr>
				<td><textarea placeholder="文件内容"></textarea></td>
				<td>
					<a>文件后缀名：</a>
					<select id="slt">
						<option name="filename" value=".txt">txt</option>
						<option name="filename" value=".html">html</option>
						<option name="filename" value="">无后缀名</option>
					</select>
					<hr>
					文件名：
					<input type="text" value="test" style="width:100px;height:80px;font-size: 42px;" id="na">
					<hr>
					<button style="font-size: 45px;" onclick="download()">下载</button>
				</td>
			</tr>
		</table>
		<script>
			function _(str){
										var a=str.indexOf("|")
										var b=str.slice(0,a)
										var c=str.slice(a+1,str.length)
										if(c=="id")
										return document.getElementById(b)
										else if(c=="name")
										return document.getElementsByName(b)
										else if(c=="class")
										return document.getElementsByClassName(b)
										else if(c=="tag")
										return document.getElementsByTagName(b)
										else
										console.error("Error:NotFound_Error:"+"'"+b+"'in"+"'"+c+"'")
									}
		</script>
		<script>
			function download(){
				var fl;
				var n;
				for(i=0;i<_("opt|name").length;i++){
					if(_("opt|name")[i].selected==true){
						fl=_("opt|name")[i].value;
						break;
					}
				}
				for(j=0;j<_("filename|name").length;j++){
					if(_("filename|name")[j].selected==true){
						n=_("filename|name")[j].value
						break;
					}
				}
				var a = document.createElement("a");
				a.href="data:text/plain;charset=" + fl + ","+_("textarea|tag")[0].value
				a.download=_("na|id").value+n
				a.click()
			}
		</script>
	</body>
</html>